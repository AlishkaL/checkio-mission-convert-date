<body data-author="freeman_lex">
<div class="question-answer">
    <div class="question">
        Nie mam pojęcia, jak zacząć rozwiązywać tę misję.
    </div>
    <div class="answer">
        <p>
            Proszę złapać pomysł 💡! Proszę podzielić podany ciąg znaków na części. Zbuduj z nich obiekt daty i przekonwertuj ten obiekt daty z powrotem na ciąg w poprawnym formacie. Po każdym kroku proszę sprawdzić, czy aktualne dane są prawidłowe, jeśli nie, proszę natychmiast zwrócić wyrażenie.
        </p>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Ok, od czego powinienem zacząć?
    </div>
    <div class="answer">
        <p>
            Proszę podzielić podany ciąg znaków na części za pomocą metody <a target="_blank" href="https://www.w3schools.com/jsref/jsref_split.asp">str.split()</a> z separatorem "/".
        </p>
        <pre class="brush: javascript">
const parts = date.split("/");
        </pre>
        <p>
            Można już sprawdzić, czy liczba części jest równa 3, w przeciwnym razie data jest nieprawidłowa.
        </p>
        <pre class="brush: javascript">
if (parts.length!== 3) return "Error: Invalid date.";
        </pre>
        <p>
            Proszę rozpakować <b class="code">parts</b> na osobny dzień, miesiąc i rok.
        </p>
        <pre class="brush: javascript">
const [dd, mm, yyyy] = parts;
        </pre>        
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Co robić dalej?
    </div>
    <div class="answer">
        <p>
            Proszę zapoznać się z klasą <a target="_blank" href="https://www.w3schools.com/js/js_dates.asp">Date()</a> oraz metodami <b class="code">date.getTime()</b> i <b class="code">date.toISOString()</b>. 
        </p>
        <p>
            Proszę zbudować obiekt daty z oddzielnych części za pomocą <b class="code">Date()</b>.
        </p>
        <pre class="brush: javascript">
const date = new Date(`${mm}/${dd}/${yyyy}`);
        </pre>
        <p>
            Proszę sprawdzić, czy jest to prawidłowa data za pomocą <b class="code">isNaN</b> i <b class="code">date.getTime()</b>.
        </p>
        <pre class="brush: javascript">
if (isNaN(date.getTime())) return "Error: Invalid date.";
        </pre>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Nadal potrzebuję podpowiedzi.
    </div>
    <div class="answer">
        <p>
            Proszę przekonwertować obiekt daty do formatu ISO za pomocą <b class="code">date.toISOString()</b>, pociąć go na 10 znaków za pomocą metody <a target="_blank" href="https://www.w3schools.com/jsref/jsref_slice_string.asp">string.slice()</a> i sprawdzić, czy jest równy ciągowi, bezpośrednio zbudowanemu z oddzielnych części.
        </p>
        <pre class="brush: javascript">
const res = date.toISOString().slice(0, 10);
if (res!== `${yyyy}-${mm}-${dd}`) return "Error: Invalid date.";
        </pre>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Jak więc powinno wyglądać moje ostateczne rozwiązanie?
    </div>
    <div class="answer">
        <p>
            Wystarczy połączyć wszystkie poprzednie podpowiedzi, zwrócić wynik i zawinąć kod w wyrażenie funkcyjne. Używanie podpowiedzi typu dla danych wejściowych i wyjściowych jest wysoce zalecane.
        </p>
        <p>Poniżej znajduje się całe rozwiązanie:</p>
        <div class="spoiler">
        <pre class="brush: javascript">
function convertDate(dateString: string): string {

    const parts = dateString.split('/');
    if (parts.length!== 3) return "Error: Invalid date.";
    const [dd, mm, yyyy] = parts;

    const date = new Date(`${mm}/${dd}/${yyyy}`);
    if (isNaN(date.getTime())) return "Error: Invalid date.";
    
    const res = date.toISOString().slice(0, 10);
    if (res!== `${yyyy}-${mm}-${dd}`) return "Error: Invalid date.";

    return res;
}
        </pre>
        </div>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Proszę pokazać mi więcej rozwiązań!<br />
        bo chcę być prawdziwym 🥇 bohaterem Javascript!
    </div>
    <div class="answer">
        <p>Jasne, proszę pobrać!</p>
        <p>
            Bez użycia obiektu Date potrzebne jest dodatkowe sprawdzenie roku przestępnego, dni i miesięcy.
        </p>
        <div class="spoiler">
        <pre class="brush: javascript">
function convertDate(dateString: string): string {

    const parts = dateString.split('/');
    if (parts.length!== 3) return "Error: Invalid date.";
    
    const [dd, mm, yyyy] = parts;
    const isLeapYear = (year: number) => (year % 4 === 0 && year % 100!== 0) || year % 400 === 0;

    if (mm === "02" && dd === "29" &&!isLeapYear(parseInt(yyyy)))
        return "Error: Invalid date.";
    
    if (parseInt(dd)> 31 || parseInt(mm)> 12)
        return "Error: Invalid date.";

    if (["04", "06", "09", "11"].includes(mm) && parseInt(dd)> 30)
        return "Error: Invalid date.";
    
    return `${yyyy}-${mm}-${dd}`;
}
        </pre>
        </div>
        <p>Proszę kliknąć <b>Best Solutions</b> w menu misji i zobaczyć wiele innych ciekawych rozwiązań!</p>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Dzięki! Teraz wiem i rozumiem więcej! Wszystko działa jak należy!
    </div>
    <div class="answer">
        Miło mi to słyszeć 👍!
    </div>
</div>
</body>